<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Petalas de Cerejeira</title>
  <link rel="stylesheet" href="Teste.css">
</head>
<body>

  <!-- Cadastro das flores -->
  <div class="A0" id="B1"> 
    <h2 class="A1">Sorteio de flores</h2>
    <input type="text" id="Item_Digitado" placeholder="Digite o nome de uma flor">
    <button onclick="Adicionar()">Adicionar</button>
    <button onclick="Sortear()">Sortear</button>

  </div>

      <div id="Lista_Flores" class="lista-flores"></div>

  <!-- Resultados -->
  <div id="B2" class="A0" style="display:none;">
    <h2 class="A1">A sorteada foi:</h2>
    <h1 id="Nome_Sorteado" class="A2"></h1>
    <button onclick="Voltar()">Novo Sorteio</button>
  </div>

  <!-- Animação -->
  <div id="flores"></div>

  <script>
    let Flores_Escolhidas = [];

    function Adicionar() {
      let Item = document.getElementById("Item_Digitado").value.trim();
      if (!Item) { alert("Digite um nome válido!"); return; }

      Flores_Escolhidas.push(Item);
      document.getElementById("Item_Digitado").value = "";

      const Lista = document.getElementById("Lista_Flores");
      const quadrado = document.createElement("div");
      quadrado.className = "quadrado-flor";

      const img = document.createElement("img");
      img.src = Item + ".png"; 
      img.alt = Item;
      img.onerror = () => img.src = "padrao.png";

      quadrado.appendChild(img);
      Lista.appendChild(quadrado);
    }

  function Sortear() {
  if (Flores_Escolhidas.length === 0) { 
    alert("Adicione pelo menos um nome!"); 
    return; 
  }

  // Limpar lista de quadradinhos antes da animação
  document.getElementById("Lista_Flores").innerHTML = "";

  const ChuvaDeFlores = document.getElementById("flores");
  ChuvaDeFlores.style.display = "block";
  Criação_Das_Flores();

  setTimeout(() => {
    // Sorteio da flor
    let Sorteado = Flores_Escolhidas[Math.floor(Math.random() * Flores_Escolhidas.length)];
    document.getElementById("Nome_Sorteado").textContent = Sorteado;

    // Alterar o fundo do body para a imagem correspondente
    document.body.style.backgroundImage = `url('Campo-${Sorteado}.png')`;

    // Mostrar resultado e esconder cadastro
    document.getElementById("B1").style.display = "none";
    document.getElementById("B2").style.display = "grid";

    // Limpar a animação
    ChuvaDeFlores.innerHTML = "";
    ChuvaDeFlores.style.display = "none";

    // Limpar lista de flores escolhidas (opcional)
    Flores_Escolhidas = [];
  }, 4500);
}


    function Voltar() {
      document.getElementById("B2").style.display = "none";
      document.getElementById("B1").style.display = "grid";

      Flores_Escolhidas = [];
      document.getElementById("Item_Digitado").value = "";
      document.getElementById("Lista_Flores").innerHTML = "";
    }

    function Criação_Das_Flores() {
      const Animação = document.getElementById("flores");
      Animação.style.display = "block";

      for (let i = 0; i < 100; i++) {
        let flor = document.createElement("div");
        flor.className = "flor";
        flor.style.left = Math.random() * 100 + "vw";
        flor.style.animationDuration = (3 + Math.random() * 2) + "s";

        let img = document.createElement("img");
        let randomFlor = Flores_Escolhidas[Math.floor(Math.random() * Flores_Escolhidas.length)];
        img.src = randomFlor + ".png";
        img.onerror = () => img.src = "padrao.png";

        flor.appendChild(img);
        Animação.appendChild(flor);

        flor.addEventListener("animationend", () => flor.remove());
      }
    }
  </script>

</body>
</html>
